name: Sync Google Sheet CSV
on:
  # Run every hour
  schedule:
    - cron: '0 * * * *'
  # Allow manual trigger from the Actions tab
  workflow_dispatch:

jobs:
  scheduled_fetch:
    runs-on: ubuntu-latest
    # ADDED: Grants write permission to the default GITHUB_TOKEN for this job
    permissions:
      contents: write 

    steps:
      # 1. Checkout the repository
      - name: Checkout repository
        uses: actions/checkout@v4
        
      # 2. Run the Flat Data action
      - name: Fetch and commit the arwr.csv
        uses: githubocto/flat@v3
        with:
          downloaded_filename: 'arwr.csv'
          http_url: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTFFpRBp56INVL1XqmHbGBrISvVdzqQ1C3N-sf9xox4oJugyPqYw7OwbxpkyolEjx8BPIkd7mb2ICza/pub?gid=745704294&single=true&output=csv'
        continue-on-error: true

      - name: Fetch and commit the classicsW.csv
        uses: githubocto/flat@v3
        with:
          downloaded_filename: 'classicsW.csv'
          http_url: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRvhxu0K_Xo9xfMRuphtXMsu4NDZejmGdOMvQW-H1NackeL8_LvkIonBTkc2nAxAAJUbobOnL4E_dJh/pub?gid=1269985083&single=true&output=csv'
        continue-on-error: true

      - name: Fetch and commit the INDI500D.csv
        uses: githubocto/flat@v3
        with:
          downloaded_filename: 'INDI500D.csv'
          http_url: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRi7daX6SydkW-0Cq75kHiWdOLVbuVcz8eVNFzNZ9YVTx4LhMJsfxh5sknLQ2qyZ7Zk3jJZftensLPq/pub?gid=1930646479&single=true&output=csv'
        continue-on-error: true

      - name: Fetch and commit the INDI500P.csv
        uses: githubocto/flat@v3
        with:
          downloaded_filename: 'INDI500P.csv'
          http_url: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRi7daX6SydkW-0Cq75kHiWdOLVbuVcz8eVNFzNZ9YVTx4LhMJsfxh5sknLQ2qyZ7Zk3jJZftensLPq/pub?gid=436262005&single=true&output=csv'
        continue-on-error: true

      - name: Fetch and commit the INDI500G.csv
        uses: githubocto/flat@v3
        with:
          downloaded_filename: 'INDI500G.csv'
          http_url: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRi7daX6SydkW-0Cq75kHiWdOLVbuVcz8eVNFzNZ9YVTx4LhMJsfxh5sknLQ2qyZ7Zk3jJZftensLPq/pub?gid=1868790515&single=true&output=csv'
        continue-on-error: true

      - name: Fetch and commit the ALMMCRTP.csv
        uses: githubocto/flat@v3
        with:
          downloaded_filename: 'ALMMCRTP.csv'
          http_url: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSubWCvIak_wQaqp4Wn7u3FB-v3Y0HqjhI08ypiX8fLMdmjPpAEUzJhc6zbgt8oTJupXEIyvVyiglnq/pub?gid=1930726604&single=true&output=csv'
        continue-on-error: true
      
      - name: Fetch and commit the INDI500S.csv
        uses: githubocto/flat@v3
        with:
          downloaded_filename: 'INDI500S.csv'
          http_url: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRi7daX6SydkW-0Cq75kHiWdOLVbuVcz8eVNFzNZ9YVTx4LhMJsfxh5sknLQ2qyZ7Zk3jJZftensLPq/pub?gid=1053430943&single=true&output=csv'
        continue-on-error: true
      
      - name: Fetch and commit the ALMMCRTG.csv
        uses: githubocto/flat@v3
        with:
          downloaded_filename: 'ALMMCRTG.csv'
          http_url: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSubWCvIak_wQaqp4Wn7u3FB-v3Y0HqjhI08ypiX8fLMdmjPpAEUzJhc6zbgt8oTJupXEIyvVyiglnq/pub?gid=545484744&single=true&output=csv'
        continue-on-error: true
      
      - name: Fetch and commit the ALMMCRTS.csv
        uses: githubocto/flat@v3
        with:
          downloaded_filename: 'ALMMCRTS.csv'
          http_url: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSubWCvIak_wQaqp4Wn7u3FB-v3Y0HqjhI08ypiX8fLMdmjPpAEUzJhc6zbgt8oTJupXEIyvVyiglnq/pub?gid=1762340545&single=true&output=csv'
        continue-on-error: true

      - name: Fetch and commit the ALMMCRTD.csv
        uses: githubocto/flat@v3
        with:
          downloaded_filename: 'ALMMCRTD.csv'
          http_url: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSubWCvIak_wQaqp4Wn7u3FB-v3Y0HqjhI08ypiX8fLMdmjPpAEUzJhc6zbgt8oTJupXEIyvVyiglnq/pub?gid=1930646479&single=true&output=csv'
        continue-on-error: true
    
      - name: Fetch and commit classicsL.csv
        uses: githubocto/flat@v3
        with: 
          downloaded_filename: 'classicsL.csv'
          http_url: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRvhxu0K_Xo9xfMRuphtXMsu4NDZejmGdOMvQW-H1NackeL8_LvkIonBTkc2nAxAAJUbobOnL4E_dJh/pub?gid=1430084053&single=true&output=csv'
          
