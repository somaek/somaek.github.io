name: Sync Google Sheet CSV
on:
  # Run every hour
  schedule:
    - cron: '0 * * * *'
  # Allow manual trigger from the Actions tab
  workflow_dispatch:

jobs:
  scheduled_fetch:
    runs-on: ubuntu-latest
    # ADDED: Grants write permission to the default GITHUB_TOKEN for this job
    permissions:
      contents: write 

    steps:
      # 1. Checkout the repository
      - name: Checkout repository
        uses: actions/checkout@v4
        
      # 2. Run the Flat Data action
      - name: Fetch and commit the CSV
        uses: githubocto/flat@v3
        with:
          downloaded_filename: 'arwr.csv'
          http_url: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTFFpRBp56INVL1XqmHbGBrISvVdzqQ1C3N-sf9xox4oJugyPqYw7OwbxpkyolEjx8BPIkd7mb2ICza/pub?gid=745704294&single=true&output=csv'
